var isCurrentSite=!1,warningConfirmed=!1,countryRegions=[],showCountryRegions=[];function getCountryRegion(){var e={lang:localInfo.lang,reqClientType:localInfo.reqClientType};"true"!=localInfo.thirdLoginFlag&&"true"!=localInfo.isQuickReg||(e.thirdLoginFlag="true");ajaxHandler("getCountryRegion",e,function(e){"1"==e.isSuccess&&(countryRegions=e.countryRegions,showCountryRegions=listToDropListCountry(countryRegions))},function(){},!1,"JSON");var o;o=localInfo.currentCountrySiteID+"-"+localInfo.currentCountryCode,$("#selectCountryImg").DropListEMUI5({items:showCountryRegions,defaultValue:o,onChange:function(e,o){var r=e.split("-");localInfo.currentCountrySiteID=r[0],localInfo.currentCountryCode=r[1];r[0];r[0]==localInfo.currentSiteID||warningConfirmed||(isCurrentSite=!1),localInfo.siteIDs=r[0],$("#selectedCountry").text(o),$("#regXCountry").text(rss_new.now_register_x_account.format(o));var n=e.split("-")[1];$("#selectCountryCodeDiv").html(""),getAgreementContent(n),afterSelectCountry(n),$("#countryRegion").val(e),displayAgreeTwoByCD(n)}})}function displayCountry(){var r=localInfo.currentCountryCode,n=getIPCountry(),s=getdefaultCountryByCurrentSiteID(),a=s.split("-")[1],t="";if(0<countryRegions.length){var i=!1;r&&$.each(countryRegions,function(e,o){if(r.toLowerCase()==o.regionID)return $("#selectedCountry").text(o.mulitLangRegion),$("#regXCountry").text(rss_new.now_register_x_account.format(o.mulitLangRegion)),i=!0,t=o.siteID+"-"+o.regionID,replaceAgreeAge(o.ageLimit),!1}),n&&!i&&$.each(countryRegions,function(e,o){if(n.toLowerCase()==o.regionID)return $("#selectedCountry").text(o.mulitLangRegion),$("#regXCountry").text(rss_new.now_register_x_account.format(o.mulitLangRegion)),i=!0,t=localInfo.currentSiteID+"-"+o.regionID,replaceAgreeAge(o.ageLimit),!1}),a&&!i&&$.each(countryRegions,function(e,o){if(a.toLowerCase()==o.regionID)return $("#selectedCountry").text(o.mulitLangRegion),$("#regXCountry").text(rss_new.now_register_x_account.format(o.mulitLangRegion)),i=!0,t=s,replaceAgreeAge(o.ageLimit),!1})}$("#countryRegion").val(t),1<=countryRegions.length&&($("#chooseCountry").css("display",""),$("#chooseCountryShadow").css("display",""))}function notCurrentSiteWarningDialog(){var e='<div style="line-height:1.5">'+rss_new.cross_register_tip+"</div>";$("<div/>").Dialog({title:rss_new.uc_common_hint,btnLeft:!1,btnRight:{text:rss_new.uc_common_igetit,fn:function(){warningConfirmed=!0,checkInputLegality()&&(registerAgreement(submitFun),this.hide())}},html:e,dialogStyle:localInfo.msgDialogStyle,beforeAction:function(){}}).Dialog("show")}function sendEmailCode(e){var n=$("#getValiCode");if(0<$("#randomCode").length&&!validator($("#randomCode"),!0))return!1;var o,r={70001101:rss_new.uc_error_10000001,70001201:rss_new.uc_error_10000001,10000002:rss_new.uc_error_10000001,70001102:rss_new.uc_error_70001102_0,70001104:rss_new.uc_error_70001104_0,10000507:rss_new.register_js_existemail,"default":rss_new.uc_error_10000001},s=$("#countryRegion").val();s&&(o=s.split("-")[1]);var a={email:e,accountType:"1",emailReqType:"3",languageCode:localInfo.lang,siteID:localInfo.currentCountrySiteID,reqClientType:localInfo.reqClientType,countryCode:o,operType:14,session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};"1"==localInfo.displayCaptchaType?a.randomCode=ramdonCodeImgObj.getRandomCode():a.randomCode=$("#randomCode").val(),rss_new.msgDialogOverlayClass&&rss_new.msgDialogOverlayClass,n.attr("disabled",!0),casAjaxObj.getEMailAuthCode(a,function t(){var e="-"+(.5*parseInt($("#msg_phoneRandomCode").width())-120+143)+"px";hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode")),showMsgSuccess({obj:$("#msg_getPhoneRandomCode"),msg:rss_new.uc_common_email_has_sendto.format(a.email),leftPix:e,rightPix:"-255px",bottom:"63px"}),$("#authCode").removeClass("chkAuthCodeSuccess"),$("#authCode").val(""),$("#authCode").removeAttr("disabled"),$("#emailAuthCodeRight").removeClass("poptips-yes"),n.attr("IntervalTime",60),n.attr("disabled",!0),n.addClass("auth_code_grey"),jsInnerTimeout($("#getValiCode"),rss_new.uc_common_resend,!0,!0)},function i(e,o){n.removeAttr("disabled",!0);var r=o.errorCode;"10000201"==r&&("1"==localInfo.displayCaptchaType&&captchaObj?(showCaptchaError(),ramdonCodeImgObj.resetRandomCode()):(showRandomCodeError(e),chgRandomCodeForReset()));"10000507"==r?showErrorNew($("#errormsgemail-box"),$("#msg_email"),e):showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e)},r)}function turnBtnToEnabled(e){e.attr("disabled",!1),e.attr("IntervalTime")<=0&&e.removeClass("auth_code_grey")}function checkImgAuthCode(){var o=$("#randomCode"),r=$("#randomCodeImg");$("#randomCode_msg");if("undefined"!=typeof o[0]&&4<=o.val().length){var e={randomCode:o.val(),session_code_key:"p_reg_login_websso_session_ramdom_code_key",randomCodeDisplayType:localInfo.randomCodeDisplayType};ajaxHandler("authCodeValidate",e,function(e){if("1"==e.isSuccess)$("#authCodeRight").addClass("poptips-yes"),hideRandomCodeError(),validateInput();else switch(chgRandomCode(r[0],localInfo.webssoLoginSessionCode),o[0].value="",$("#authCodeRight").removeClass("poptips-yes"),validateInput(),e.errorCode){case"10000201":showRandomCodeError(rss_new.common_js_wrongcode);break;case"10000001":showRandomCodeError(rss_new.uc_error_10000001);break;case"10000004":showRandomCodeError(rss_new.uc_error_10000004);break;default:showRandomCodeError(rss_new.uc_error_10000002)}},function(e){},!0,"JSON")}else"undefined"!=typeof o[0]&&o.val().length}function showRandomCodeError(e){$("#randomCode_msg").html(e),$("#randomCode_msg").addClass("error-tips-EMUI5"),$("#randomCodeDiv").addClass("input-error-EMUI5")}function hideRandomCodeError(){$("#randomCode_msg").html(""),$("#randomCode_msg").removeClass("error-tips-EMUI5"),$("#randomCodeDiv").removeClass("input-error-EMUI5")}function checkInputLegality(){if($("#secPhoneAcct")!=undefined&&$("#secPhoneAcct").val()!=undefined&&""==$("#secPhoneAcct").val().trim()&&(hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone")),hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))),-1==$("#btnSubmit").attr("class").indexOf("sel")||$("#btnSubmit").hasClass("send-ajax"))return!1;var e=!1;if($(".error-tips-EMUI5").each(function(){1<$(this).text().trim().length&&(e=!0)}),e)return!1;var o=$("#registerForm");if(!validator(o,!0))return!1;if("true"==localInfo.isRegNeedInputAge&&!checkBirthday(!1))return!1;var r=$("#registerForm input[name='formBean.secphone']").val(),n=$("#registerForm input[name='formBean.secphoneauthCode']").val(),s=$("#countryCode").val();if(-1<s.indexOf("+")&&(s=s.replace("+","00")),"true"==localInfo.mustBindPhone){if(""==r)return showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_emptyphone),!1;if(!valiMobile(r,s))return showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error),!1;if(""==n)return showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss_new.forgetbyphone_inputsmscode),!1;if(!$("#authCode").hasClass("chkAuthCodeSuccess")||!$("#secAuthCode").hasClass("chkAuthCodeSuccess"))return!1}else if(r){if(!valiMobile(r,s))return showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error),!1;if(""==n)return showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss_new.forgetbyphone_inputsmscode),!1;if(!$("#authCode").hasClass("chkAuthCodeSuccess")||!$("#secAuthCode").hasClass("chkAuthCodeSuccess"))return!1}if(localInfo.currentCountrySiteID==localInfo.currentSiteID||warningConfirmed)return!0;notCurrentSiteWarningDialog()}function submitFun(e){checkExistAuto($("#username"),function(){postAction(e)})}function getbirthDate(){if("false"==localInfo.isRegNeedInputAge)return"";var e=$("#birthDate").datePickEMUI5("Y").toString(),o=$("#birthDate").datePickEMUI5("M").toString(),r=$("#birthDate").datePickEMUI5("D").toString();return 1==o.length&&(o="0"+o),1==r.length&&(r="0"+r),e+o+r}function postAction(r){var n=jQuery("#registerForm input[name='formBean.username']"),s=jQuery("#registerForm input[name='formBean.password']"),e=(jQuery("#registerForm input[name='formBean.randomCode']"),jQuery("#registerForm input[name='formBean.authCode']")),o=$("#countryRegion").val(),a="",t="";1<o.split("-").length&&(a=o.split("-")[1],t=o);var i=s.val(),d=localInfo.agreementContentsStr;localInfo.isSupportAdMarketAgr&&0==$("#adMarketChecked").is(":checked")&&(d=checkAdMarketAgreedAgrContent(d)),d=(d=d.replace(/\$countryCode/g,t)).replace(/\'/g,'"');var c={userAccount:n.val(),password:i,accountType:1,clientID:localInfo.clientID,authCode:e.val().trim(),reqClientType:localInfo.reqClientType,registerChannel:localInfo.loginChannel,languageCode:localInfo.lang,countryCode:a,agrVers:d,thirdLoginFlag:""!=localInfo.thirdLoginFlag&&localInfo.thirdLoginFlag,birthDate:getbirthDate(),session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};"1"==localInfo.displayCaptchaType?c.randomCode=ramdonCodeImgObj.getRandomCode():c.randomCode=$("#randomCode").val(),-1<(a=$("#countryCode").val()).indexOf("+")&&(a=a.replace("+","00"));var l,m=$("#secPhoneAcct").val();m&&(c.secAccountType=6,c.secAccount=getPhoneNumber(m,a),c.secVerifyCode=$("#secAuthCode").val()),c.operType=0,c.randomAuthCode=$("#randomCode").val(),rss_new.msgDialogOverlayClass&&(l={overlayClass:rss_new.msgDialogOverlayClass}),$("#btnSubmit").addClass("send-ajax"),ajaxHandler("registerCloudAccount",c,function(e){if("1"==e.isSuccess){$("#btnSubmit").addClass("send-ajax"),$("#register_msg").show().html("");var o={userAccount:n.val(),password:s.val(),reqClientType:localInfo.reqClientType,loginChannel:localInfo.loginChannel,authcode:e.regToken,service:htmldecode(localInfo.service),loginUrl:localInfo.loginUrl,opType:13};ajaxHandler("remoteLogin",o,function(e){$("#btnSubmit").addClass("send-ajax"),"1"==e.isSuccess?gotoUrl(e.callbackURL):($("#btnSubmit").removeClass("send-ajax"),showErrorReg(e.errorCode,r))},function(e){},!1,"JSON")}else showErrorReg(e.errorCode,r)},function(){},!0,"json",l)}function showErrorReg(e,o){chgRandomCodeForReset(),turnBtnToEnabled($("#getSecValiCode")),turnBtnToEnabled($("#getValiCode")),$("#authCode").removeClass("chkAuthCodeSuccess"),$("#authCode").val(""),$("#authCode").removeAttr("disabled"),$("#secAuthCode").removeAttr("disabled"),$("#secAuthCode").removeClass("chkAuthCodeSuccess"),$("#secAuthCode").val(""),$("#emailAuthCodeRight").removeClass("poptips-yes"),$("#secPhoneAuthCodeRight").removeClass("poptips-yes"),"70001201"==e?(showPopError(rss_new.uc_error_10000001),$("#randomCode").val(""),$("#randomCode").focus()):"10000704"==e?(showPopError(rss_new.common_js_wrongcode),$("#randomCode").val(""),$("#randomCode").focus(),$("#authCode").val(""),$("#authCodeRight").removeClass("poptips-yes"),chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)):"70008800"==e?(showPopError(rss_new.error_risk_70008800),$("#randomCode").val(""),$("#msg_randomCode").show().html(""),$("#authCodeRight").removeClass("poptips-yes"),chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)):"10000001"==e||"70001101"==e?(showPopError(rss_new.uc_error_10000001),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"10002073"==e?(window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.uc_error_10002073_1)},100),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"10000201"==e?"1"==localInfo.displayCaptchaType&&captchaObj?(showCaptchaError(),ramdonCodeImgObj.resetRandomCode()):($("#randomCode").val(""),showRandomCodeError(rss_new.common_js_wrongcode),$("#authCodeRight").removeClass("poptips-yes"),chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)):"70008001"==e?(window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.uc_error_70008001)},100),$("#randomCode").val(""),$("#randomCode").focus()):"70002070"==e?(window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.uc_error_70002070)},100),$("#randomCode").val(""),$("#randomCode").focus()):"70001401"==e?(showPopError(rss_new.uc_error_70001401),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"10001013"==e?(window.setTimeout(function(){showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss_new.forgetbyphone_wrongsmscode)},100),turnBtnToEnabled($("#getSecValiCode")),$("#secAuthCode").attr("disabled",!1),$("#secAuthCode").removeClass("chkAuthCodeSuccess")):"70002002"==e?(window.setTimeout(function(){showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss_new.uc_error_70002002)},100),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70007007"==e?(showPopError(rss_new.uc_error_70007007),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70002003"==e?(showPopError(rss_new.uc_error_70002003_1),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70006006"==e?(showPopError(rss_new.uc_error_70006606),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70007003"==e?(showPopError(rss_new.uc_error_70007003),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70007004"==e?(showPopError(rss_new.uc_error_70007004),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70007001"==e?(showPopError(rss_new.uc_error_70007001),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70002067"==e?(showPopError(rss_new.uc_error_70002067),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70002033"==e?(showPopError(rss_new.uc_error_70002033),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70002018"==e?(showPopError(rss_new.uc_error_70002018),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70002057"==e?window.setTimeout(function(){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss_new.uc_error_70002057)},100):"70002058"==e?(showPopError(rss_new.uc_error_70002058_1),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70002039"==e?window.setTimeout(function(){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss_new.uc_error_70002039)},100):"10000004"==e?(showPopError(rss_new.uc_error_10000004),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"10000002"==e?(showPopError(rss_new.uc_error_10000002),$("#randomCode").val(""),$("#msg_randomCode").show().html("")):"70006007"==e?showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.uc_error_70006007_1):(showPopError(rss_new.register_js_emailregfail),$("#randomCode").val(""),$("#msg_randomCode").show().html("")),o.hide()}function checkExistAuto(e,r){var o=e.val();if(50<o.length||o.length<5)showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss_new.login_js_accountlength);else{var n={userAccount:o,accountType:1};casAjaxObj.isExsitUser(n,function s(e){var o=e.existAccountFlag;"0"==o?(hideErrorNew($("#errormsgemail-box"),$("#msg_email")),r&&r()):"1"==o?showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss_new.register_js_existemail):hideErrorNew($("#errormsgemail-box"),$("#msg_email"))},function a(e,o){o&&"10000004"==o.errorCode||showErrorNew($("#errormsgemail-box"),$("#msg_email"),e)})}}function changeInputCountryCode(e){var t,i=[];t=localInfo.currentCountryCode,e&&$.each(e,function(e,o){var r=o.split("(")[0],n=o.split("|")[0],s=o.split("|")[1];if(r=r.replace("+","00"),s==t&&(localInfo.default_country_code=r,localInfo.default_country_cy=s),r){var a={value:r,cy:s,label:n};i.push(a)}}),$("#countryCode").val(localInfo.default_country_code),$("#input_languageCode").DropListEMUI5({items:i,defaultValue:localInfo.default_country_code,defaultCy:localInfo.default_country_cy,onChange:function(e,o){hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"));var r=o.split("(");if(1<r.length){$("#countryCode").val(r[0]);var n=$("#secPhoneAcct").val();if(""!=n&&!valiMobile(n))return void showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error)}}})}function changeSecPhoneCode(e){var o=$(".optional");"true"==e?o.hide():(o.show(),-1!=o.css("left").indexOf("-")?o.css("left",-(o.width()+16)+"px"):o.css("right",-(o.width()+16)+"px"))}function afterSelectCountry(e){var o={lang:localInfo.lang,countryCode:e};ajaxHandler("isCountrySupportPhone",o,function(e){"1"==e.isSuccess&&(localInfo.mustBindPhone=e.mustBind,$("#secPhoneRandomCode-box").css("display","inherit"),$("#bindSecPhone-box").css("display","inherit"),changeSecPhoneCode(e.mustBind))},function(e){},!0,"JSON");var r={lang:localInfo.lang,siteIDs:localInfo.siteIDs};casAjaxObj.getCountryCallingCode(r,function n(e){{if("1"!=e.isSuccess)return;changeInputCountryCode(e.countryCallingCodeList),displayCountry();var o=$("#secPhoneAcct").val();if(o&&!valiMobile(o))return void showErrorNew($("#bindSecPhoneBox"),$("#msg_sec_phone"),rss_new.common_js_error)}},function s(e,o){})}function getSecPhoneCode(e,o){var r=$("#username").val();if(r&&""!=r.trim()){if("1"==localInfo.displayCaptchaType){if(!ramdonCodeImgObj.isValidateRandomCodeSuccess())return showCaptchaError(),void ramdonCodeImgObj.resetRandomCode()}else{var n=$("#randomCode").val();if(!n||""==n.trim())return void showErrorNew($("#randomCodeDiv"),$("#randomCode_msg"),rss_new.picture_verfication_code_null_error)}var s=$("#authCode").val();if(s&&""!=s.trim()){var a=$("#secPhoneAcct").val();if(a&&""!=a.trim())if(valiMobile(a)){var t=$("#countryCode").val();-1<t.indexOf("+")&&(t=t.replace("+","00")),$("#msg_sec_phone").html(""),$("#register_msg").html(""),sendSecPhoneSMS(getPhoneNumber(a,t),e,o)}else showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error);else showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.uc_common_validator_phone_require)}else showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss_new.register_email_auth_placeholder)}else showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss_new.uc_common_input_email_addr)}function chkAuthCode(e,o,r,n,s,a,t,i){var d={accountType:o,userAccount:e,authCode:r,authOprType:"3",siteID:localInfo.currentCountrySiteID,reqClientType:localInfo.reqClientType,operType:11},c={10000001:rss_new.common_wrong_authcode,70001201:rss_new.uc_error_10000001,10000201:rss_new.common_wrong_authcode,"default":rss_new.common_wrong_authcode};localInfo.isReadyToSubmit=!1,casAjaxObj.chkAuthCode(d,function l(){n.attr("disabled",!0),n.addClass("chkAuthCodeSuccess"),t.addClass("poptips-yes"),i.attr("disabled",!0),i.addClass("auth_code_grey"),localInfo.isReadyToSubmit&&$("#btnSubmit").click()},function m(e){$("#next").removeClass("send-ajax"),$("#inputAuthCode").addClass("input-error-EMUI5"),$("#msg_error_chkemail").addClass("addbtmpad-msg-top2p"),t.removeClass("poptips-yes"),showErrorNew(s,a,e)},c)}function showCaptchaError(){captchaObj.onSuccess(function(){$("#randomCodeDiv").css("margin-bottom","0")}),$("#randomCode_msg").addClass("error-tips-EMUI5"),$("#randomCodeDiv").removeClass("input-error-EMUI5").css("margin-bottom","24px"),$("#picAuthCode").removeClass("input-error-EMUI5"),$("#input-error-EMUI5").removeClass("input-error-EMUI5"),ramdonCodeImgObj.validateRandomCodeError()}function sendSecPhoneSMS(e,o,r,n){var s=$("#getSecValiCode"),a={10000002:rss_new.uc_error_10000001,70001201:rss_new.uc_error_10000001,10001011:rss_new.reg_input_email_authcode,70001102:rss_new.uc_error_70001102_1,70001104:rss_new.uc_error_70001104_1,"default":rss_new.resetpwd_get_authcode_error},t={userAccount:e,smsReqType:"3",reqClientType:o,accountType:2,siteID:localInfo.currentCountrySiteID,languageCode:localInfo.lang,operType:17,session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};"1"==localInfo.displayCaptchaType?t.randomCode=ramdonCodeImgObj.getRandomCode():t.randomCode=$("#randomCode").val(),rss_new.msgDialogOverlayClass&&rss_new.msgDialogOverlayClass,s.attr("disabled",!0),casAjaxObj.getSMSAuthCode(t,function i(){var e=.5*(parseInt($("#msg_secphoneRandomCode").width())-280)+"px";hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode")),showMsgSuccess({obj:$("#msg_secphoneRandomCode"),msg:rss_new.uc_common_sms_has_sendto.format(getExpressPhone(t.userAccount)),leftPix:e,rightPix:"150px",bottom:"37px"}),$("#secAuthCode").removeAttr("disabled"),$("#secAuthCode").removeClass("chkAuthCodeSuccess"),$("#secAuthCode").val(""),$("#secPhoneAuthCodeRight").removeClass("poptips-yes"),s.attr("IntervalTime",60),s.attr("disabled",!0),s.addClass("auth_code_grey"),jsInnerTimeout($("#getSecValiCode"),rss_new.uc_common_resend,!0,!0)},function d(e,o){s.removeAttr("disabled",!0);var r=o.errorCode;"10000201"==r?"1"==localInfo.displayCaptchaType&&captchaObj?(showCaptchaError(),ramdonCodeImgObj.resetRandomCode()):(showRandomCodeError(e),chgRandomCodeForReset()):"10001012"==r?secPhoneAuthCodeOverLimit():"70009032"==r?showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),e):"10001011"==r?showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e):showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),e)},a)}$(document).ready(function(){var e,o,r,n,s;e=$("#tabPhone").width(),o=$("#tabMail").width(),r=o<e?e:o,$("#tabPhone").width(r+2+"px"),$("#tabMail").width(r+2+"px"),$(".reg-tab").css("visibility","visible"),localInfo.urlCountrySiteID==localInfo.currentSiteID&&(isCurrentSite=!0),n=$("#username"),s=n.val(),n.blur(function(){$(".seachDiv").css("display","none"),0<this.value.length&&s!=n.val()&&valiEmail(this.value)&&(s=n.val())}),function(){var t=$("#username"),i=$(".seachDiv"),e=$(".seachDiv ul li"),d=-1;t.keyup(function(){if(0<this.value.length&&-1<this.value.indexOf("@")){var s=this.value.split("@")[1],a=0;e.each(function(e){this.id="searchLi_"+e;var o=$("#"+this.id),r=o.attr("text");-1==r.indexOf(s)?(this.style.display="none",$(this).removeClass("showLi")):(a+=1,this.style.display="",$(this).addClass("showLi")),r=r.replace(s,"");var n=t.val()+r;this.innerHTML=n,o.mousedown(function(){var e=t.val().split("@")[0];t.val(e+"@"+o.attr("text")),i.css("display","none")})}),0<a&&(i.css("display","block"),$(this).addClass("showLi"))}}),$("#username").bind("keydown",function(e){var o=$(".seachDiv ul li.showLi"),r=$("#username"),n=$(".seachDiv"),s=$(".seachDiv ul li.current");switch(o.each(function(e){$(o[e]).css("background","#fff"),$(o[e]).removeClass("current")}),e.which){case 38:d--,c(o);break;case 40:d++,c(o);break;case 13:if(void 0===s.get(0)||"LI"!=s.get(0).tagName&&"li"!=s.get(0).tagName)$("#btnSubmit").click();else{var a=r.val().split("@")[0];r.val(a+"@"+s.attr("text")),n.css("display","none"),r.blur()}break;default:return}});var c=function(e){d<0&&(d=0),d>=e.length&&(d=e.length-1),$(e[d]).css("background","RGB(173,173,173)"),$(e[d]).addClass("current")}}(),$("#passwdEye").click(function(){"password"==document.getElementById("password").type?(document.getElementById("password").type="text",document.getElementById("confirmPwd").type="text",$(this).attr("src",XSSGuard4URL(localInfo.eyeon))):(document.getElementById("password").type="password",document.getElementById("confirmPwd").type="password",$(this).attr("src",XSSGuard4URL(localInfo.eyeoff)))}),getCountryRegion(),changeInputCountryCode(localInfo.countryCodes.split(",")),displayCountry(),getAgreementContent(localInfo.currentCountryCode),"true"==$("#adDefaultAgreeOrNot").text()&&$("#adMarketChecked").prop("checked",!0),0<$("#birthDate").length&&showBirthDayDropBox(),initInputContent()}),$(function(){var o=jQuery("#registerForm input[name='formBean.username']"),e=jQuery("#registerForm input[name='formBean.password']"),r=jQuery("#registerForm input[name='checkPassword']"),n=jQuery("#registerForm input[name='formBean.authCode']"),s=jQuery("#registerForm input[name='formBean.randomCode']"),a=$("#registerForm input[name='formBean.secphone']"),t=$("#secAuthCode");$.label.defaults.ifRight="10px",$.label(o,rss_new.uc_common_input_email_addr).label(e,rss_new.uc_common_input_ling_pwd).label(r,rss_new.please_enter_password_again).label(n,rss_new.register_email_auth_placeholder).label(s,rss_new.picture_verfication_code_null_error),$.label($("#secPhoneAcct"),rss_new.uc_common_validator_phone_require),o.change(function(){var e=$("#authCode"),o=$("#secPhoneAcct"),r=$("#secAuthCode");$("#randomCode").val()!=undefined&&""!=$("#randomCode").val().trim()&&chgRandomCodeForReset(),$("#randomCode").val(""),e.removeAttr("disabled"),turnBtnToEnabled($("#getValiCode")),e.removeClass("chkAuthCodeSuccess"),e.val(""),o.val(""),r.val(""),r.removeAttr("disabled"),turnBtnToEnabled($("#getSecValiCode")),r.removeClass("chkAuthCodeSuccess"),$("#emailAuthCodeRight").removeClass("poptips-yes"),$("#secPhoneAuthCodeRight").removeClass("poptips-yes"),hideErrorNew($("#errormsgemail-box"),$("#msg_email")),hideErrorNew($("#pwdDiv"),$("#msg_password")),hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword")),hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode")),hideRandomCodeError(),$("#authCodeRight").removeClass("poptips-yes"),hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone")),hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))}),a.change(function(){var e=$("#secAuthCode");e.attr("disabled")&&"disabled"==e.attr("disabled")&&(e.removeAttr("disabled"),turnBtnToEnabled($("#getSecValiCode")),e.removeClass("chkAuthCodeSuccess")),e.val(""),$("#secPhoneAuthCodeRight").removeClass("poptips-yes"),hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))}),a.keyup(function(){hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"));var e=$("#secAuthCode");e.attr("disabled")&&"disabled"==e.attr("disabled")||(e.val(""),hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode")))}),t.keyup(function(){hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))}),t.blur(function(){var e=$("#registerForm input[name='formBean.secphone']").val();if(!(o=$("#secAuthCode"))||0!=o.val().trim())if(1<=o.val().trim().length&&6!=o.val().trim().length||!/^\d+$/.test(o.val().trim()))showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss_new.common_js_wrongcode);else if(o&&6==o.val().trim().length){var o=$("#registerForm input[name='formBean.secphoneauthCode']").val(),r=$("#countryCode").val();-1<r.indexOf("+")&&(r=r.replace("+","00"));var n=getPhoneNumber(e,r);""!=e&&chkAuthCode(n,2,o,$("#secAuthCode"),$("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),$("#secPhoneAuthCodeRight"),$("#getSecValiCode"))}}),a.blur(function(){if($("#secPhoneAcct")==undefined||$("#secPhoneAcct").val()==undefined||""!=$("#secPhoneAcct").val().trim()){var e=$("#countryCode").val();return-1<e.indexOf("+")&&(e=e.replace("+","00")),valiMobile(this.value,e)?void 0:(showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error),!1)}}),changeSecPhoneCode(localInfo.mustBindPhone),$.label(t,rss_new.forgetbyphone_inputsmscode);var i=$("#btnSubmit"),d={$email:$("#username"),showErrorFn:function(e){showErrorNew($("#errormsgemail-box"),$("#msg_email"),e)},successFn:function(){hideErrorNew($("#errormsgemail-box"),$("#msg_email"))},reInputFn:function(){hideErrorNew($("#errormsgemail-box"),$("#msg_email"))}};emailValidator(d),e.blur(function(){$("#pwd_check_dialog").html("")}),e.validator("bind",{type:["require","strLength","hasSpace","pwdComplexity","errorInput","pwdformat"],trim:!1,validOnChange:!0,min:8,max:32,msg_ct:"#msg_password",errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.common_js_inputpwd);break;case"strLength":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.reducePwd_format_2);break;case"hasSpace":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.reducePwd_format_1);break;case"pwdComplexity":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.reducePwd_format_3);break;case"errorInput":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.reducePwd_inputError_desc);break;case"pwdformat":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.common_js_pwd_account_same_reverse)}},successFunction:function(){r.val()&&validator(r,!0)},reInputFunction:function(){hideErrorNew($("#pwdDiv"),$("#msg_password"))}}),r.validator("bind",{type:["require","eq"],trim:!1,validOnChange:!0,compareTo:e,msg_ct:"#msg_checkPassword",msg:{require:rss_new.reg_confirm_password,eq:rss_new.common_js_pwdnotsame},errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"),rss_new.reg_confirm_password);break;case"eq":showErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"),rss_new.common_js_pwdnotsame)}},successFunction:function(){hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"))},reInputFunction:function(){hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"))}}),n.validator("bind",{type:["require","length","int"],trim:!0,validOnChange:!0,max:6,min:6,msg_ct:"#msg_phoneRandomCode",msg:{require:rss_new.uc_common_sec_email_authcode_input,"int":rss_new.common_js_wrongcode,"default":rss_new.common_js_wrongcode},errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss_new.uc_common_sec_email_authcode_input);break;case"int":default:showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss_new.common_js_wrongcode)}},successFunction:function(){},reInputFunction:function(){hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"))}}),n.blur(function(){if((e=n.val())&&(e=e.trim())&&6==e.length){var e;chkAuthCode(o.val(),1,e=n.val(),n,$("#errRandomCode-box"),$("#msg_phoneRandomCode"),$("#emailAuthCodeRight"),$("#getValiCode"))}}),o.focus(),i.bind("click",function(){localInfo.isReadyToSubmit=!0,checkInputLegality()&&registerAgreement(submitFun)}),e.bind("keyup",function(){onPwdKeyUp4EMUI(e[0],$("#msg_password"),$("#pwdDiv"),"error-tips-EMUI5","input-error-EMUI5",!0)}),"1"!=localInfo.displayCaptchaType&&(s.validator("bind",{type:["require","length"],trim:!0,min:4,max:4,validOnChange:!1,reInputEvent:"keyup",errorClassEMUI5:"input-error-EMUI5",errorBorder:$("#randomCodeDiv"),errorFunction:function(e,o){switch(o.type){case"require":showRandomCodeError(rss_new.picture_verfication_code_null_error);break;case"length":showRandomCodeError(rss_new.login_js_codeerror)}},successFunction:function(e,o){},reInputFunction:function(){hideRandomCodeError(),$("#authCodeRight").removeClass("poptips-yes")}}),$("#randomCode").bind("keyup",function(e){validateInput(),checkImgAuthCode()}),0<$("#randomCode").val().length&&chgRandomCodeForReset(),validateInput()),registerPwdformatValidator($("#username"))}),$(document).keyup(function(e){switch(e.which){case 13:$("#btnSubmit").click();break;default:return}});var secPhoneAuthCodeOverLimit=function(){var e="<div>"+rss_new.reg_sec_authcode_over_limit+"</div>";e+="<div id='crossSite_errDiv' style='margin-top:10px;font-size:12px;color:#ff3320'></div>",$("<div></div>").DialogSimple({text:e,btnText:rss_new.uc_common_igetit,dialogStyle:localInfo.msgDialogStyle,btnFn:function(){location.reload()},btnLeftText:"",btnLeftFn:function(){},html:e}).show()};$(function(){try{if(localInfo=window.localInfo||{},"undefined"==typeof localInfo.illnessOptype||"0"==localInfo.randomCodeDisplayType||"false"==localInfo.isUseCaptchaService&&5==localInfo.illnessOptype)return;var o=[1],r=[5,6,7,8,9];1==localInfo.illnessOptype?"1"==localInfo.displayCaptchaType?illnessOptype=1:illnessOptype=5:2==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?illnessOptype=2:illnessOptype=6:3==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?(illnessOptype=3,"1"==localInfo.sceneId&&(illnessOptype=4)):(illnessOptype=7,"1"==localInfo.sceneId&&(illnessOptype=8)):4==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?illnessOptype=4:illnessOptype=8:5==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?illnessOptype=15:illnessOptype=9:6==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?(illnessOptype=10,"true"==localInfo.isFromQuery&&(illnessOptype=11)):(illnessOptype=12,"true"==localInfo.isFromQuery&&(illnessOptype=13)):7==localInfo.illnessOptype&&("2"==localInfo.randomCodeDisplayType?illnessOptype=11:illnessOptype=13);var e={checkClass:"geetest_holder",count:0,canReSend:!0,operType:illnessOptype,isGeet:!0,init:function(){var e=this;return e.count=0,~o.indexOf(e.operType)&&(e.checkClass="geetest_panel"),~r.indexOf(e.operType)&&(e.checkClass="randomCodeImg",e.isGeet=!1),e.canReSend=!0,setTimeout(function(){$("#randomCodeImg").bind("error",function(){e.sendErrorLog(2)})},0),this},checkExit:function(){var e=this;return e.count<=60?(e.count++,0<$("."+e.checkClass).length||setTimeout(function(){e.checkExit()},500)):(e.sendErrorLog(1),e.init()),this},sendErrorLog:function(o){var r=this,e={reqClientType:localInfo.reqClientType,loginChannel:localInfo.loginChannel,operType:r.operType,message:"",illnessType:o};return ajaxHandler("analysisHealth",e,function(e){"10000033"==e.errorCode&&r.sendAgain(o)},function(e){r.sendAgain(o)},!0,"JSON"),this},sendAgain:function(e){var o=this;return o.canReSend?(setTimeout(function(){o.sendErrorLog(e)},1e3),o.canReSend=!1):o.canReSend=!0,this}};e.init(),1!=localInfo.illnessOptype&&e.checkExit(),window.checkRamdomObj=e}catch(n){}});